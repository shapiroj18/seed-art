<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
	<link rel="icon" type="image/png" href="img/barley.png"/>
    <title>Crop Art</title>
    <style>
	  div {
		height: 500px;
		width: 100%;
		border-style: solid;
		border-width: 1px;
	  }

	  img {
		object-fit: cover;
		width: 20px;
		height: 20px;
	  }
    </style>
  </head>
  <body>
	<div id="canvas">
	</div>
	<script>
		function dragStartHandler(event) {
			event.dataTransfer.setData("image/png", event.target.id)
			event.dataTransfer.effectAllowed = "move"
		}

		function onDrop(event) {
			const data = event.dataTransfer.getData("image/png");
			event.target.textContent = data;
			event.preventDefault();
		}

		// make canvas draggable target
		const canvas = document.getElementById("canvas");

		canvas.addEventListener("dragenter", (event) => {
			event.preventDefault();
		});

		canvas.addEventListener("dragover", (event) => {
			event.preventDefault();
		});

		// Create navy bean button
		let btn = document.createElement("button"); 
		btn.innerHTML = 'Navy Bean';
		btn.addEventListener('click',function(){
			img = document.createElement("img")
			img.id = "p1"
			img.src = "img/navy-bean.png"
			img.draggable = true
			img.onDragStart = "dragStartHandler(event)"
			document.getElementById('canvas').appendChild(img);
			addDraggableImage(img)
		});
		document.getElementById('canvas').appendChild(btn);

		// create draggable stuff
		function addDraggableImage(img) {
			const canvas = document.getElementById("canvas");

			let dragged = null;

			const draggableImg = document.getElementById(img.id);
			draggableImg.addEventListener("dragstart", (event) => {
				dragged = event.target;
			});

			canvas.addEventListener("dragover", (event) => {
				event.preventDefault();
			});

			canvas.addEventListener("drop", (event) => {
				console.log(event)
				event.preventDefault();
				dragged.parentNode.removeChild(dragged);
				dragged.style.position = 'absolute'
				dragged.style.left = `${event.clientX}px`
				dragged.style.top = `${event.clientY}px`
				event.target.appendChild(dragged);
			});
		}
    </script>
  </body>
</html>
